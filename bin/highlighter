#! /usr/bin/env bash

# @file        bin/highlighter
# @author      Brandon Christie <bchristie.dev@gmail.com>


#######################################
# Get help text
# Globals:
#   None
# Arguments:
#   None
# Outputs:
#   Writes help text to STDOUT
#######################################
function __highlighter_help__()
{
    cat <<EOH
Usage: highlighter [-b|--background <color>] [-f|--foreground <color>] [-h|--help]
                   [-s|--style <style>]

Options:
  -b, --background
  -f, --foreground
  -h, --help
  -s, --style
EOH
}

#######################################
# Entry point
# Globals:
#   None
# Arguments:
#   {@} Options
#######################################
function __highlighter_main__()
{
    local -r opts=$(getopt -o b:f:hs: -l background:,foreground:,help,style: -- "$@") || exit
    local -A colors=([Black]=30 [Red]=31 [Green]=32 [Yellow]=33 [Blue]=34 [Purple]=35 [Cyan]=36 [White]=37)
    local -A styles=([Normal]=0 [Bold]=1 [Faint]=2 [Italics]=3 [Underline]=4)
    local highlighter

    eval set -- "$opts"

    while true; do
        case "$1" in
            -h|--help)
                __highlighter_help__
                exit
                ;;
            -b|--background)
                highlighter="$highlighter\e[$((${colors[$2]}+10))m"
                shift
                ;;
            -f|--foreground)
                highlighter="$highlighter\e[${colors[$2]}m"
                shift
                ;;
            -s|--style)
                highlighter="$highlighter\e[${styles[$2]}m"
                shift
                ;;
            --)
                shift
                break
                ;;
        esac

        shift
    done

    echo -e "$highlighter$*\e[${styles[Normal]}m"
}

__highlighter_main__ "$@"
